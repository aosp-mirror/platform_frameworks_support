{
  "comments": [
    {
      "key": {
        "uuid": "c1265da6_dd368585",
        "filename": "camera/camera2/src/androidTest/java/androidx/camera/camera2/impl/CaptureSessionTest.java",
        "patchSetId": 11
      },
      "lineNbr": 454,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "Since we are moving away from refreshing a DeferrableSurface, can we instead just create a new instance instead of the doing the refreshing logic?\n\nIt would be much less confusing and less work in the future.",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d455295_e94458e6",
        "filename": "camera/camera2/src/androidTest/java/androidx/camera/camera2/impl/CaptureSessionTest.java",
        "patchSetId": 11
      },
      "lineNbr": 454,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "removed the RefreshImageReaderSurface.  The new design regarding how the pending single capture request changes its DeferrableSurface for the new capture session is still unknown. I will change the test if necessary after the new design is merged.",
      "parentUuid": "c1265da6_dd368585",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90878fb7_4994980c",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/Camera2CaptureRequestBuilder.java",
        "patchSetId": 11
      },
      "lineNbr": 57,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "SessionConfig is not used in this class. There is only a map of the configured surfaces.\n\nBetter to say DeferrableSurface not in configuredSurfaceMap",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed0d2bb9_d10e1dab",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/Camera2CaptureRequestBuilder.java",
        "patchSetId": 11
      },
      "lineNbr": 57,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "90878fb7_4994980c",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "856251c3_520fae80",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/Camera2CaptureRequestBuilder.java",
        "patchSetId": 11
      },
      "lineNbr": 121,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "This check should probably be done before calling device.createCaptureRequest()\nBetter to do early check for null return, otherwise there is wasted work done.\n\nProbably check captureConfig.getSurface() !\u003d null and !isEmpty()",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a8d45a17_ee25145d",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/Camera2CaptureRequestBuilder.java",
        "patchSetId": 11
      },
      "lineNbr": 121,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "done",
      "parentUuid": "856251c3_520fae80",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "166ad166_427adf0a",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 163,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "It might be better to check the DeferrableSurfaces from the session config to the mConfiguredSurfaceMap.keys(), because calling surfaceList() will actually do the transform from DeferrableSurface to Surface.",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3eacf7e_bd63e604",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 163,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "166ad166_427adf0a",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8d844329_ed4c2d23",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 223,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "Might be good to write a comment that there might be some DeferrableSurfaces that point to the same Surface.",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1741490_d6097971",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 223,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8d844329_ed4c2d23",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1da63620_c6f46c36",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 270,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "Can move this check to right after the captureRequest is built, because no need to create the OutputConfiguration and SessionConfiguration if the capture request isn\u0027t going to be sent.",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5797fa22_0fd1b677",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 270,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1da63620_c6f46c36",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77e3bfe4_db8b56ba",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 471,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "Shouldn\u0027t the implementation options from captureConfig already be added, since the captureConfigureBuilder was created from the captureConfig?",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "240e9543_675b577e",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 471,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "This is for making captureConfig has higher priority than onReaptingCaptureConfigs.  Discussed with Wenhung,  it is better we override same options in onRepeatingCaptureConfigs to prevent from extension affect our behavior.",
      "parentUuid": "77e3bfe4_db8b56ba",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02f3a6e4_02a52a95",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 471,
      "author": {
        "id": 1475857
      },
      "writtenOn": "2019-06-05T07:05:58Z",
      "side": 1,
      "message": "Ah, in the previous design, \nI add the implementation options from extension first, \nand then, append the implementation options from the RepeatingCaptureConfig of CameraX.\n\nThe implementation options from CameraX would override the implementation options from extension if they use the same key.\n\nIt seems Scott would like to keep the code have the same behavior like previous did. \nOr we can consider to adjust the override ordering of the keys? (since we didn\u0027t define the case when CameraX and extension have the same key)",
      "parentUuid": "240e9543_675b577e",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a071b3a_8661d56f",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 471,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-05T18:16:07Z",
      "side": 1,
      "message": "Aren\u0027t the onRepeatingCaptureConfigs from the extensions? And the ones from the mSessionConfigs the ones that are set by CameraX? So isn\u0027t this the reverse of what you want?\n\nBut anyways, we should either comment this behavior, because its not clear from the code why this has to be done. The comment should say why the onRepeatingCaptureConfigs have lower priority. And remember the camera2 module should have no concept of extensions.",
      "parentUuid": "02f3a6e4_02a52a95",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e20c115_40ff9419",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 471,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-06T06:21:34Z",
      "side": 1,
      "message": "yes onRepeatingCaptureConfigs is only from extensions currently. We don\u0027t want onRepeatingCaptureConfigs to modify common options like 3A related, so we want to make mSessionConfigs has higher priority.    \n\nI\u0027ve modified the comments to have more info on it.",
      "parentUuid": "6a071b3a_8661d56f",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "38664b7d_36d9786d",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 471,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-14T01:26:35Z",
      "side": 1,
      "message": "That would be in direct conflict with aosp/977288 which give CameraEventCallbacks onRepeating higher priority that mSessionConfigs.\n\nIf extensions have been added then it should have higher priority. They are meant to override the common options.",
      "parentUuid": "5e20c115_40ff9419",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dd6d37e4_304dec06",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 516,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-04T18:53:38Z",
      "side": 1,
      "message": "Shouldn\u0027t the implementation options from captureConfig already be added, since the captureConfigureBuilder was created from the captureConfig?",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43bc1e2d_6bd71aee",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 516,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-05T05:22:22Z",
      "side": 1,
      "message": "Discussed with Leo, this is on purpose to make captureConfig\u0027s options has higher priority than repeatingCaptureConfig.",
      "parentUuid": "dd6d37e4_304dec06",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b6862a26_21cc39f9",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 516,
      "author": {
        "id": 1481635
      },
      "writtenOn": "2019-06-05T07:58:53Z",
      "side": 1,
      "message": "Meet the similar situation before, see the comment on patch 1 of aosp/950081 and there is also another implementation idea that doesn\u0027t have to override options again outside the CaptureConfig.Builder.",
      "parentUuid": "43bc1e2d_6bd71aee",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4c1c9b01_ae06a558",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 516,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-05T18:16:07Z",
      "side": 1,
      "message": "Then we should either:\n1) Document why this is the case, because it is not clear from code that addImplementationOptions overrides previous values.\n2) Or have a version of addImplementationOptions that does the override logic the way that we so desire.\n\nThis way, a few months from now there won\u0027t be someone who removes it because they think it is cleaning up the code.",
      "parentUuid": "b6862a26_21cc39f9",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "335e7587_428c301d",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 516,
      "author": {
        "id": 1481938
      },
      "writtenOn": "2019-06-06T06:21:34Z",
      "side": 1,
      "message": "add more documents here. Thanks for the reminds .",
      "parentUuid": "4c1c9b01_ae06a558",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "021bad87_bcaa244f",
        "filename": "camera/camera2/src/main/java/androidx/camera/camera2/impl/CaptureSession.java",
        "patchSetId": 11
      },
      "lineNbr": 516,
      "author": {
        "id": 1482448
      },
      "writtenOn": "2019-06-14T01:26:35Z",
      "side": 1,
      "message": "The change in aosp/977288 duplicates the concerns that are here.\n\nI would prefer using those changes because just the code itself makes it clearer what is being done instead of requiring options to be added twice.",
      "parentUuid": "335e7587_428c301d",
      "revId": "959a00c0defc4a3d8ddd5dcb8a34722d0bba65d1",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}